
<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>IBAN DOƒûRULAMA v1</title>

<style>
*,
*::before,
*::after { box-sizing: border-box; }
html, body { height: 100%; }

:root{
  --bg:#eef2f7;
  --card-bg:rgba(255,255,255,.72);
  --text:#111;
  --border:rgba(0,0,0,.15);
  --success:#7CCF90;
  --error:rgba(255,0,0,.26);
  --button:linear-gradient(135deg,#006CFF,#004CFF);
  --button-hover:linear-gradient(135deg,#0052e6,#003cd9);
}

body.dark{
  --bg:#07090d;
  --card-bg:rgba(30,30,30,.78);
  --text:#fff;
  --success:#3CCF73;
  --error:rgba(255,70,70,.38);
  --button:linear-gradient(135deg,#00aaff,#0077ff);
  --button-hover:linear-gradient(135deg,#0088dd,#005fcc);
}

body{
  margin:0;
  background:var(--bg);
  font-family:"Segoe UI", Arial, sans-serif;
  color:var(--text);
  display:flex;
  align-items:center;
  justify-content:center;
  min-height:100vh;
  transition:.3s;
}

/* --- SOL √úST LOGO --- */
#logoBox{
  position: fixed;
  top: 10px;
  left: 10px;
  z-index: 999;
}
#logoBox img{
  height: 45px;
  width: auto;
  filter: drop-shadow(0 1px 1px rgba(0,0,0,.15));
}
body.dark #logoBox img{
  filter: drop-shadow(0 1px 2px rgba(0,0,0,.35));
}
@media(max-width:480px){
  #logoBox img{ height: 34px; }
}

/* --- TARƒ∞H SAƒû √úST --- */
#tarihBox{
  position:fixed;
  top:10px;
  right:10px;
  font-size:15px;
  font-weight:700;
  color:var(--text);
  text-align:right;
}

/* --- KART --- */
.kutu{
  width:min(650px, 92vw);
  background:var(--card-bg);
  border:1px solid var(--border);
  border-radius:18px;
  padding:28px;
  backdrop-filter: blur(18px);
  overflow:hidden;
}

.top-bar{
  display:flex; justify-content:flex-end;
  align-items:center; gap:30px;
  margin-bottom:12px;
}

.switch-col{ display:flex; flex-direction:column; align-items:center; }
.switch-label{ margin-top:4px; font-size:12px; }

.switch{
  position:relative; width:42px; height:22px;
}
.switch input{ display:none; }
.slider{
  position:absolute; inset:0;
  background:#bbb; border-radius:30px;
  cursor:pointer; transition:.3s;
}
.slider:before{
  content:""; position:absolute;
  width:18px; height:18px;
  left:2px; top:2px;
  background:#fff; border-radius:50%;
  transition:.3s;
}
input:checked + .slider{ background:#4cd964; }
input:checked + .slider:before{ transform:translateX(20px); }

h2{
  margin:10px 0 20px 0;
  text-align:center;
  font-size:24px;
  font-weight:700;
}

.input-wrap{ position:relative; width:100%; }

input#iban{
  width:100%; height:48px;
  padding:0 56px 0 16px;
  border:1px solid var(--border);
  border-radius:12px;
  background:rgba(255,255,255,.55);
  color:var(--text);
  font-size:17px;
}
body.dark input#iban{
  background:rgba(60,60,60,.45);
  color:#fff;
}

.paste-btn{
  position:absolute; right:8px; top:50%;
  transform:translateY(-50%);
  font-size:22px; cursor:pointer;
}

button.action{
  width:100%; height:54px; margin-top:20px;
  border:none; border-radius:14px;
  background:var(--button);
  color:#fff; font-size:19px; font-weight:600;
}
button.action:hover{ background:var(--button-hover); }

.sonuc{
  display:none;
  margin-top:20px;
  padding:16px 18px;
  border-radius:12px;
  font-size:20px;
  font-weight:600;
  color:#fff;
}
.ok{ background:var(--success); }
.err{ background:var(--error); }

.result-flex{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
}

@keyframes snakeShake{
  0%,100%{transform:translateX(0)}
  10%{transform:translateX(-18px)}
  20%{transform:translateX(18px)}
  30%{transform:translateX(-15px)}
  40%{transform:translateX(15px)}
  50%{transform:translateX(-10px)}
  60%{transform:translateX(10px)}
  70%{transform:translateX(-6px)}
  80%{transform:translateX(6px)}
  90%{transform:translateX(-3px)}
}
.snake{ animation: snakeShake .65s ease; }

.footer-left,
.footer-right{
  position:fixed;
  bottom:10px;
  display:flex;
  align-items:center;
  gap:6px;
  font-size:15px;
  font-weight:700;
  color:var(--text);
}
.footer-left{ left:10px; }
.footer-right{ right:10px; }

</style>
</head>

<body>

<!-- ‚úî %100 √áALI≈ûAN LOGO -->
<div id="logoBox">
  <img src="https://denemesayfasi.github.io/assets/logo.svg" alt="Logo">
</div>

<!-- TARƒ∞H -->
<div id="tarihBox"><span id="bugunTarih"></span></div>

<div class="kutu" id="kart">

  <div class="top-bar">
    <div class="switch-col">
      <label class="switch">
        <input type="checkbox" id="themeToggle">
        <span class="slider"></span>
      </label>
      <span class="switch-label">G√ºnd√ºz/Gece</span>
    </div>

    <div class="switch-col">
      <label class="switch">
        <input type="checkbox" id="soundToggle">
        <span class="slider"></span>
      </label>
      <span class="switch-label">Ses A√ß/Kapat</span>
    </div>
  </div>

  <h2>üè¶ IBAN DOƒûRULAMA v1</h2>

  <div class="input-wrap">
    <input id="iban" placeholder="TR11 1111 1111 1111 1111 1111 11">
    <span class="paste-btn" onclick="pasteIBAN()">üìã</span>
  </div>

  <button class="action" onclick="ibanKontrol()">DOƒûRULA ‚Ä£</button>

  <div id="sonuc" class="sonuc"></div>

</div>

<div class="footer-left">üñåÔ∏èET√úRK</div>
<div class="footer-right">‚úâÔ∏è e.turk@palen.com.tr</div>

<script>
/* TARƒ∞H */
function tarihYaz(){
  const t=new Date();
  const g=String(t.getDate()).padStart(2,'0');
  const a=String(t.getMonth()+1).padStart(2,'0');
  const y=t.getFullYear();
  bugunTarih.textContent=`${g}.${a}.${y}`;
}
tarihYaz();

/* Tema */
themeToggle.addEventListener("change",e=>{
  document.body.classList.toggle("dark",e.target.checked);
});

/* Ses default kapalƒ± */
let soundOn=false;
soundToggle.checked=false;
soundToggle.addEventListener("change",e=>soundOn=e.target.checked);

/* IBAN filtresi */
iban.addEventListener("input",e=>{
  const raw=e.target.value.toUpperCase().replace(/[^0-9A-Z]/g,"");
  let out="";
  for(let i=0;i<raw.length;i++){
    if(i>0 && i%4===0) out+=" ";
    out+=raw[i];
  }
  e.target.value=out;
});

/* PASTE + AUTO KONTROL */
async function pasteIBAN(){
  try{
    let txt=await navigator.clipboard.readText();
    txt=txt.replace(/\s+/g,"").toUpperCase().replace(/[^0-9A-Z]/g,"");
    iban.value=txt;
    iban.dispatchEvent(new Event("input"));
    setTimeout(()=>ibanKontrol(),120);
  }catch(e){
    alert("Pano izni engellendi");
  }
}

/* Ses */
const audioCtx=new (window.AudioContext||window.webkitAudioContext)();
function playSound(t){
  if(!soundOn)return;
  const o=audioCtx.createOscillator();
  const g=audioCtx.createGain();
  if(t==='ok'){
    g.gain.value=.18;o.type='triangle';o.frequency.value=880;
    o.connect(g).connect(audioCtx.destination);o.start();
    setTimeout(()=>o.frequency.value=1320,100);
    setTimeout(()=>o.stop(),200);
  }else{
    g.gain.value=.24;o.type='square';o.frequency.value=440;
    o.connect(g).connect(audioCtx.destination);o.start();
    setTimeout(()=>o.stop(),230);
  }
}

/* Bankalar */
const bankalar={
"001":"Merkez Bankasƒ±","010":"Ziraat Bankasƒ±","012":"Halkbank","015":"Vakƒ±fbank",
"014":"TSKB","016":"Eximbank","017":"T√ºrkiye Kalkƒ±nma Bankasƒ±","029":"Birle≈üik Fon Bankasƒ±",
"032":"TEB","034":"Aktif Yatƒ±rƒ±m Bankasƒ±","046":"Akbank","048":"HSBC",
"058":"Sƒ±nai Yatƒ±rƒ±m Bankasƒ±","059":"≈ûekerbank","062":"Garanti BBVA","064":"ƒ∞≈ü Bankasƒ±",
"067":"Yapƒ± Kredi","134":"Denizbank A.≈û.","091":"Arap T√ºrk Bankasƒ±","092":"Citibank",
"099":"ING","103":"Fiba Bank","106":"Portigon AG","107":"BNP-Ak-Dresdner",
"108":"Turkland Bank","109":"Tekstil Bankasƒ±","111":"Finansbank","115":"Deutsche Bank",
"125":"Burganbank","133":"ING Bank","135":"Anadolubank","157":"EnPara",
"203":"Albaraka T√ºrk","205":"Kuveyt T√ºrk","206":"T√ºrkiye Finans","208":"Asya Katƒ±lƒ±m",
"210":"Vakƒ±f Katƒ±lƒ±m","223":"Albaraka T√ºrk Katƒ±lƒ±m"
};

/* MOD97 */
function mod97(iban){
  const r=iban.slice(4)+iban.slice(0,4);
  const c=r.replace(/[A-Z]/g,ch=>ch.charCodeAt(0)-55);
  let m=0;
  for(let i=0;i<c.length;i++){
    m=(m*10+Number(c[i]))%97;
  }
  return m===1;
}

/* Kontrol */
function ibanKontrol(){
  const v=iban.value.replace(/\s+/g,"");
  const s=document.getElementById("sonuc");

  if(!v.startsWith("TR")||v.length!==26)
    return hata("IBAN GE√áERSƒ∞Z!");

  if(!mod97(v))
    return hata("IBAN GE√áERSƒ∞Z!");

  const kod=v.slice(6,9);
  s.className="sonuc ok";
  s.style.display="block";

  s.innerHTML=bankalar[kod]?
    `<div class='result-flex'><div>‚úî IBAN GE√áERLƒ∞</div><div>Banka: ${bankalar[kod]}</div></div>`:
    "‚úî IBAN GE√áERLƒ∞";

  playSound("ok");
}

/* Hata */
function hata(msg){
  const s=document.getElementById("sonuc");
  s.className="sonuc err";
  s.style.display="block";
  s.textContent=msg;
  playSound("err");
}
</script>

</body>
</html>
