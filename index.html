
<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>IBAN DOƒûRULAMA v1</title>
<style>
/* ------------------------------------------------------ */
/* GENEL D√úZELTME: Ta≈ümalarƒ± √∂nle */
*,
*::before,
*::after { box-sizing: border-box; }
html, body { height: 100%; }

/* ------------------------------------------------------ */
/* TEMA DEƒûƒ∞≈ûKENLERƒ∞ */
:root{
  --bg:#eef2f7;
  --card-bg:rgba(255,255,255,.72);
  --text:#111;
  --border:rgba(0,0,0,.15);

  --success:#7CCF90;
  --error:rgba(255,0,0,.26);

  --button:linear-gradient(135deg,#006CFF,#004CFF);
  --button-hover:linear-gradient(135deg,#0052e6,#003cd9);
}

body.dark{
  --bg:#0c0f15;
  --card-bg:rgba(45,45,45,.72);
  --text:#fff;
  --success:#4AAE65;
  --error:rgba(255,70,70,.32);
  --button:linear-gradient(135deg,#009dff,#006cff);
  --button-hover:linear-gradient(135deg,#0082dd,#005ac0);
}

/* ------------------------------------------------------ */
/* SAYFA MERKEZLEME */
body{
  margin:0;
  background:var(--bg);
  font-family:"Segoe UI", Arial, sans-serif;
  color:var(--text);
  display:flex;
  align-items:center;
  justify-content:center;
  min-height:100vh;
  transition:.3s;
}

/* ------------------------------------------------------ */
/* KART */
.kutu{
  width: min(650px, 92vw);   /* k√º√ß√ºk ekranlarda ta≈ümaz */
  background:var(--card-bg);
  border:1px solid var(--border);
  border-radius:18px;
  padding:28px;
  backdrop-filter: blur(18px);
  overflow:hidden;           /* i√ß eleman ta≈ümalarƒ±nƒ± kes */
}

/* ------------------------------------------------------ */
/* √úST B√ñL√úM ‚Äì SWITCHLER */
.top-bar{
  display:flex;
  justify-content:flex-end;
  align-items:center;
  gap:30px;
  margin-bottom:12px;
}

.switch-col{
  display:flex;
  flex-direction:column;
  align-items:center;
}

.switch-label{
  margin-top:4px;
  font-size:12px;
  color:var(--text);
  user-select:none;
}

/* iPhone tarzƒ± k√º√ß√ºk switch */
.switch{
  position:relative;
  width:42px; height:22px;
}
.switch input{ display:none; }
.slider{
  position:absolute; inset:0;
  background:#bbb;
  border-radius:30px;
  cursor:pointer;
  transition:.3s;
}
.slider:before{
  content:"";
  position:absolute;
  width:18px; height:18px;
  left:2px; top:2px;
  background:#fff;
  border-radius:50%;
  transition:.3s;
}
input:checked + .slider{ background:#4cd964; }
input:checked + .slider:before{ transform: translateX(20px); }

/* ------------------------------------------------------ */
/* BA≈ûLIK */
h2{
  margin:10px 0 20px 0;
  text-align:center;
  font-size:24px;
  font-weight:700;
}

/* ------------------------------------------------------ */
/* Gƒ∞Rƒ∞≈û ALANI ‚Äì TA≈ûMA YOK */
.input-row{
  /* t√ºm yatay i√ßerikleri aynƒ± hizada tutar */
  display:block;
  width:100%;
}

.input-wrap{
  position:relative;
  width:100%;
}

input#iban{
  width:100%;
  max-width:100%;
  height:48px;
  padding:0 56px 0 16px;  /* saƒüda ikon i√ßin bo≈üluk */
  border:1px solid var(--border);
  border-radius:12px;
  background:rgba(255,255,255,.55);
  color:var(--text);
  font-size:17px;
  outline:none;
}
body.dark input#iban{
  background:rgba(60,60,60,.45);
  color:#fff;
}

/* Clipboard butonu ‚Äì her zaman tam saƒü-orta */
.paste-btn{
  position:absolute;
  right:8px;
  top:50%;
  transform:translateY(-50%);
  width:40px; height:40px;
  display:flex; align-items:center; justify-content:center;
  font-size:22px;
  cursor:pointer;
  user-select:none;
}

/* ------------------------------------------------------ */
/* BUTON */
button.action{
  width:100%;
  margin-top:20px;
  height:54px;
  border:none;
  border-radius:14px;
  background:var(--button);
  color:#fff;
  font-size:19px;
  font-weight:600;
  cursor:pointer;
}
button.action:hover{ background:var(--button-hover); }

/* ------------------------------------------------------ */
/* SONU√á KUTUSU */
.sonuc{
  display:none;
  margin-top:20px;
  padding:16px 18px;
  border-radius:12px;
  font-size:20px;
  font-weight:600;
  color:#fff;
}
.ok{ background:var(--success); }
.err{ background:var(--error); }

.result-flex{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
}
@media (max-width:520px){
  .result-flex{ flex-direction:column; text-align:center; }
}

/* ------------------------------------------------------ */
/* SNAKE TITRE≈ûƒ∞M (hata) */
@keyframes snakeShake{
  0%,100%{transform:translateX(0)}
  10%{transform:translateX(-18px)}
  20%{transform:translateX(18px)}
  30%{transform:translateX(-15px)}
  40%{transform:translateX(15px)}
  50%{transform:translateX(-10px)}
  60%{transform:translateX(10px)}
  70%{transform:translateX(-6px)}
  80%{transform:translateX(6px)}
  90%{transform:translateX(-3px)}
}
.snake{ animation: snakeShake .65s ease; }

/* ------------------------------------------------------ */
/* FOOTER ‚Äì ikonlu & kalƒ±n */
.footer-left,
.footer-right{
  position:fixed;
  bottom:10px;
  display:flex; align-items:center; gap:6px;
  font-size:15px; font-weight:700; color:var(--text);
}
.footer-left{ left:10px; }
.footer-right{ right:10px; }
</style>
</head>
<body>

<div class="kutu" id="kart">

  <!-- Switchler -->
  <div class="top-bar">
    <div class="switch-col">
      <label class="switch">
        <input type="checkbox" id="themeToggle">
        <span class="slider"></span>
      </label>
      <span class="switch-label">Gece/G√ºnd√ºz</span>
    </div>

    <div class="switch-col">
      <label class="switch">
        <input type="checkbox" id="soundToggle" checked>
        <span class="slider"></span>
      </label>
      <span class="switch-label">Ses A√ß/Ses Kapat</span>
    </div>
  </div>

  <!-- Ba≈ülƒ±k -->
  <h2>‚óºÔ∏èIBAN DOƒûRULAMA v1</h2>

  <!-- IBAN giri≈ü satƒ±rƒ± (ta≈üma yok) -->
  <div class="input-row">
    <div class="input-wrap">
      <input id="iban" placeholder="TR11 1111 1111 1111 1111 1111 11" />
      <span class="paste-btn" title="Panodan yapƒ±≈ütƒ±r" onclick="pasteIBAN()">üìã</span>
    </div>
  </div>

  <!-- Doƒürula -->
  <button class="action" onclick="ibanKontrol()">DOƒûRULA</button>

  <!-- Sonu√ß -->
  <div id="sonuc" class="sonuc"></div>

</div>

<!-- Footer ikon + metin -->
<div class="footer-left">üñåÔ∏è ET√úRK</div>
<div class="footer-right">‚úâÔ∏è e.turk@palen.com.tr</div>

<script>
/* ---------------- Temalar ---------------- */
document.getElementById('themeToggle').addEventListener('change', e=>{
  document.body.classList.toggle('dark', e.target.checked);
});

/* ---------------- IBAN bi√ßimleme ---------------- */
document.getElementById('iban').addEventListener('input', e=>{
  const v = e.target.value.toUpperCase().replace(/[^0-9A-Z]/g,'');
  let o = '';
  for(let i=0;i<v.length;i++){ if(i>0 && i%4===0) o+=' '; o+=v[i]; }
  e.target.value = o;
});

/* ---------------- Pano yapƒ±≈ütƒ±r ---------------- */
async function pasteIBAN(){
  try{
    let txt = await navigator.clipboard.readText();
    txt = txt.replace(/\s+/g,'').toUpperCase();
    const el = document.getElementById('iban');
    el.value = txt;
    el.dispatchEvent(new Event('input'));
  }catch(err){
    // tarayƒ±cƒ± izin vermezse sessiz ge√ß
  }
}

/* ---------------- Ses sistemi ---------------- */
let soundOn = true;
document.getElementById('soundToggle').addEventListener('change', e=>{ soundOn = e.target.checked; });
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
function playSound(type){
  if(!soundOn) return;
  const osc = audioCtx.createOscillator();
  const g = audioCtx.createGain();
  if(type==='ok'){
    g.gain.value = .16; osc.type='triangle'; osc.frequency.value=880;
    osc.connect(g).connect(audioCtx.destination); osc.start();
    setTimeout(()=>osc.frequency.value=1320,100);
    setTimeout(()=>osc.stop(),200);
  }else{
    g.gain.value = .24; osc.type='square'; osc.frequency.value=440;
    osc.connect(g).connect(audioCtx.destination); osc.start();
    setTimeout(()=>osc.stop(),230);
  }
}

/* ---------------- Banka kodlarƒ± (Denizbank=134) ---------------- */
const bankalar = {
  "001":"Merkez Bankasƒ±","010":"Ziraat Bankasƒ±","012":"Halkbank","015":"Vakƒ±fbank",
  "014":"TSKB","016":"Eximbank","017":"T√ºrkiye Kalkƒ±nma Bankasƒ±","029":"Birle≈üik Fon Bankasƒ±",
  "032":"TEB","034":"Aktif Yatƒ±rƒ±m Bankasƒ±","046":"Akbank","048":"HSBC",
  "058":"Sƒ±nai Yatƒ±rƒ±m Bankasƒ±","059":"≈ûekerbank","062":"Garanti BBVA","064":"ƒ∞≈ü Bankasƒ±",
  "067":"Yapƒ± Kredi","134":"Denizbank A.≈û.","091":"Arap T√ºrk Bankasƒ±","092":"Citibank",
  "099":"ING","103":"Fiba Bank","106":"Portigon AG","107":"BNP-Ak-Dresdner",
  "108":"Turkland Bank","109":"Tekstil Bankasƒ±","111":"Finansbank","115":"Deutsche Bank",
  "125":"Burganbank","133":"ING Bank","135":"Anadolubank",
  "203":"Albaraka T√ºrk","205":"Kuveyt T√ºrk","206":"T√ºrkiye Finans","208":"Asya Katƒ±lƒ±m",
  "210":"Vakƒ±f Katƒ±lƒ±m","223":"Albaraka T√ºrk Katƒ±lƒ±m"
};

/* ---------------- MOD-97 ---------------- */
function mod97(iban){
  const r = iban.slice(4) + iban.slice(0,4);
  const c = r.replace(/[A-Z]/g, ch => ch.charCodeAt(0)-55);
  let m = 0;
  for(let i=0;i<c.length;i++){ m = (m*10 + Number(c[i])) % 97; }
  return m === 1;
}

/* ---------------- IBAN KONTROL ---------------- */
function ibanKontrol(){
  const iban = document.getElementById('iban').value.replace(/\s+/g,'');
  const sonuc = document.getElementById('sonuc');
  const kart = document.getElementById('kart');

  // Temel kontroller
  if(!iban.startsWith('TR') || iban.length !== 26) return hata('IBAN GE√áERSƒ∞Z!');
  if(!mod97(iban)) return hata('IBAN GE√áERSƒ∞Z!');

  // IBAN doƒüru ‚Üí banka kodunu dene
  const kod = iban.slice(6,9);

  sonuc.className = 'sonuc ok';
  sonuc.style.display = 'block';

  if(bankalar[kod]){
    sonuc.innerHTML = `
      <div class="result-flex">
        <div>‚úî IBAN GE√áERLƒ∞</div>
        <div>Banka: ${bankalar[kod]}</div>
      </div>`;
  }else{
    // Banka bulunmasa bile algoritma doƒüru ‚Üí sadece ge√ßerli yaz
    sonuc.textContent = '‚úî IBAN GE√áERLƒ∞';
  }

  playSound('ok');
}

/* ---------------- HATA ---------------- */
function hata(msg){
  const sonuc = document.getElementById('sonuc');
  const kart = document.getElementById('kart');

  sonuc.className = 'sonuc err';
  sonuc.style.display = 'block';
  sonuc.textContent = msg;

  playSound('err');

  // Snake titre≈üim
  kart.classList.remove('snake');
  void kart.offsetWidth; // reflow
  kart.classList.add('snake');
}
</script>
</body>
</html>

